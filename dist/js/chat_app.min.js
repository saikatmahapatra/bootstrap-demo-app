function scrollToBottom(){($scrollableArea=$(".messageContainer")).scrollTop($scrollableArea[0].scrollHeight)}function formatAMPM(e){var s=e.getHours(),e=e.getMinutes(),n=12<=s?"pm":"am";return(s=(s%=12)||12)+":"+(e<10?"0"+e:e)+" "+n}$(function(){var s=io.connect(),n=$("#chatWindow"),e=$("#messageForm"),t=$("#messageTxt"),o=$("#conversationMessages"),a=$("#loginFormContainer"),l=$("#loginForm"),r=$("#usersContainer"),m=$("#onlineUsers"),c=$("#username"),g=null;e.submit(function(e){e.preventDefault(),console.log("in sendChat(). Sent by "+g),s.emit("send message",t.val()),t.val("")}),t.on("keyup",function(e){console.log(g+" is typing"),s.emit("typing",g)}),s.on("new message",function(e){var s=formatAMPM(new Date),n="";e.userName!=g?n+='<div class="row chat-msg-container receive-msg-container">':n+='<div class="row chat-msg-container sent-msg-container">',n+='<div class="col-10 msg-txt">',e.userName!=g?n+='<div class="messages receive-msg-txt">':n+='<div class="messages sent-msg-txt">',n=(n+="<p>"+e.msgTxt+"</p>")+'<time datetime="">'+e.userName+" "+s+" </time>",o.append(n=(n+="</div>")+"</div>"+"</div>"),scrollToBottom()}),l.submit(function(e){e.preventDefault(),s.emit("new user",c.val(),function(e){e&&(a.addClass("d-none"),r.removeClass("d-none"),n.removeClass("d-none"))}),g=c.val(),c.val("")}),s.on("get users",function(e){var s="";for(i=0;i<e.length;i++)s+='<li class="list-group-item">'+e[i]+"</li>";m.html(s)}),s.on("typing",function(e){$("#displayTyping").html(e.userName+" is typing message")})}),scrollToBottom();